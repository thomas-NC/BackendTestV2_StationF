{"remainingRequest":"/home/thomasnc/Bureau/B2/Cours-node-js/BackendTestV2/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/thomasnc/Bureau/B2/Cours-node-js/BackendTestV2/frontend/src/views/Reservation.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/thomasnc/Bureau/B2/Cours-node-js/BackendTestV2/frontend/src/views/Reservation.vue","mtime":1568188655114},{"path":"/home/thomasnc/Bureau/B2/Cours-node-js/BackendTestV2/frontend/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/thomasnc/Bureau/B2/Cours-node-js/BackendTestV2/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/thomasnc/Bureau/B2/Cours-node-js/BackendTestV2/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/thomasnc/Bureau/B2/Cours-node-js/BackendTestV2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/thomasnc/Bureau/B2/Cours-node-js/BackendTestV2/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbody {\n  width: 100%;\n  background: rgb(20,116,181);\n  background: linear-gradient(0deg,  #b2e5ff 0%, rgba(91,56,226,1) 80%);\n}\n.container {\n  font-family: 'Raleway', sans-serif;\n  padding-bottom: 100px;\n}\n.header {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 60px 0 40px 0;\n}\n.header h1 {\n  color: #F1F1F1;\n}\n.header .datepicker {\n  padding: 90px 0 0 0;\n}\ntable {\n  margin: 0 2.5% 0 2.5%;\n  border-collapse: collapse;\n  width: 95%;\n  color: white;\n}\ntable th {\n  background-color:  #282828;\n  vertical-align: top;\n}\ntable th h2 {\n  color: #b2e5ff;\n}\ntable, th, td {\n  border: 1px solid white;\n}\ntable .reservationsBoard td tr td{\n  border: 0px;\n  border-bottom: 1px solid white;\n  background-color: rgba(28, 28, 28, 0.4);\n  min-width: 100px;\n  width: 10%;\n  height: 65px;\n  text-align: center;\n  vertical-align: middle;\n}\ntable .reservationsBoard td tr td .buttons {\n  background-color:  white;\n}\ntable .reservationsBoard td tr .error-message {\n  color: #c33737;\n}\n.intro {\n  color: white;\n  text-align: center;\n  padding-top: 30px;\n  font-size: 22px;\n  line-height: 25px;\n  letter-spacing: 0.7px;\n}\n",{"version":3,"sources":["Reservation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Reservation.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>Station F - Réservation De Salles</h1>\n      <Datepicker class=\"datepicker\" placeholder=\"Pick a date\" :disabled-dates=\"disabledDates\" @selected=\"showRooms = true\" v-model=\"date\"/>\n    </div>\n    <div v-if=\"this.showRooms === true\">\n      <table>\n          <tr>\n            <th></th>\n            <th v-for=\"room in rooms\" v-bind:key=\"room\">\n              <h2>{{ room.name }}</h2>\n              <p> Description: \"{{ room.description }}\"</p>\n              <p>Capacité: {{ room.capacity}} </p>\n              <p v-if=\"room.equipements[0] !== undefined\">Equipements: </p>\n              <ul v-for=\"equipement in room.equipements\" v-bind:key=\"equipement\">\n                  <li>\n                    {{equipement.name}}\n                  </li>\n              </ul>\n            </th>        \n          </tr>\n          <tr class=\"reservationsBoard\">\n            <td>\n              <tr v-for=\"n in 11\" v-bind:key=\"n\">\n                <td>\n                  {{ n + 7}} : 00\n                </td>\n              </tr>\n            </td>\n            <td v-for=\"room in rooms\" v-bind:key=\"room\">\n              <tr v-for=\"value in getOpenTimes(room.name)\" v-bind:key=\"value\">               \n                <td v-if=\"showButton(value) == true\">\n                  <md-button class=\"buttons\" type=\"button\" name=\"button\" v-on:click=\"parseDate(date); makeReservation('username', room.name, date, value, value+1)\">Réserver</md-button>\n                </td>\n                <td v-else class=\"error-message\">\n                  salle Réservée\n                </td>                \n              </tr>\n            </td>\n          </tr>\n      </table>\n    </div>\n    <div v-else>\n      <article class=\"intro\">Bienvenue sur le portail de réservation de salles de Station F!<br>\n      pour commencer à réserver des salles , clickez sur le petit bouton ci-dessus et choisissez une date</article>\n    </div>\n  </div>\n</template>\n\n\n<style>\nbody {\n  width: 100%;\n  background: rgb(20,116,181);\n  background: linear-gradient(0deg,  #b2e5ff 0%, rgba(91,56,226,1) 80%);\n}\n.container {\n  font-family: 'Raleway', sans-serif;\n  padding-bottom: 100px;\n}\n.header {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 60px 0 40px 0;\n}\n.header h1 {\n  color: #F1F1F1;\n}\n.header .datepicker {\n  padding: 90px 0 0 0;\n}\ntable {\n  margin: 0 2.5% 0 2.5%;\n  border-collapse: collapse;\n  width: 95%;\n  color: white;\n}\ntable th {\n  background-color:  #282828;\n  vertical-align: top;\n}\ntable th h2 {\n  color: #b2e5ff;\n}\ntable, th, td {\n  border: 1px solid white;\n}\ntable .reservationsBoard td tr td{\n  border: 0px;\n  border-bottom: 1px solid white;\n  background-color: rgba(28, 28, 28, 0.4);\n  min-width: 100px;\n  width: 10%;\n  height: 65px;\n  text-align: center;\n  vertical-align: middle;\n}\ntable .reservationsBoard td tr td .buttons {\n  background-color:  white;\n}\ntable .reservationsBoard td tr .error-message {\n  color: #c33737;\n}\n.intro {\n  color: white;\n  text-align: center;\n  padding-top: 30px;\n  font-size: 22px;\n  line-height: 25px;\n  letter-spacing: 0.7px;\n}\n</style>\n\n<script>\nimport Datepicker from 'vuejs-datepicker'\n// on importe ReservationService pour pouvoir utiliser les fonctions de l'api\nimport ReservationService from '../services/ReservationsService.vue'\n// moment nous servira à formatter la valeur de la date séléctionnée avec le DatePicker \nimport moment from 'moment'\n\nexport default {\n    name: 'reservation',\n    components: {\n        Datepicker,\n    },\n    data() {\n      return {\n        date: \"\",\n        showRooms: false,\n        reservations: [],\n        rooms: [],\n        disabledDates: {\n          to: new Date()\n        }\n      }\n    },\n    methods: {\n      makeReservation: function(name, roomName, date, timeStart, timeEnd)\n      {\n        ReservationService.createReservation(name, roomName, date, timeStart, timeEnd);\n      },\n      getAvailableReservations: function(date)\n      {\n        ReservationService.getAvailableReservations(date)\n        .then((data) =>\n        {\n          this.reservations = data;\n        });\n      },\n      parseDate: function(date)\n      {\n        this.date = moment(date).format(\"DD MMMM YYYY\");\n      },\n      // on passe par les fonctions getOpenTimes et showButton pour pouvoir itérer à travers les v-for dans le template\n      // et savoir quand afficher un bouton de réservation ou un message indiquant que la salle est déja réservée\n      getOpenTimes: function(name)\n      {\n        // fonction servant à récupérer les heures bloquées pour une salle donnée, retournant un array des horaires disponibles\n        let times = [];\n        let dispo = [8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18];\n        for(let i = 0; i < this.reservations.length; i ++)\n        {\n          if(this.reservations[i].roomName == name)\n          {\n            times.push(this.reservations[i].timeStart);\n          }\n        }\n        for(let x = 0; x < times.length; x ++)\n        {\n          dispo.splice(dispo.indexOf(times[x]), 1, 0);\n        }\n        return dispo;\n      },\n      showButton: function(time)\n      {\n        if(time == 0)\n        {\n          return false;\n        }\n        else\n        {\n          return true;\n        }\n      }\n    },\n    created()\n    {\n      fetch('http://localhost:3030/rooms')\n      .then((response) =>\n      {\n      return response.json();\n      })\n      .then((data) =>\n      {\n      this.rooms = data;\n      })       \n    },\n    // à chaque modification de la date, on va chercher les réservations déja faites pour ce jour\n    updated()\n    { \n      this.parseDate(this.date);\n      this.getAvailableReservations(this.date);\n    }\n}\n</script>"]}]}